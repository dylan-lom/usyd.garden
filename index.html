<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>ðŸŒ¼USYD Community GardenðŸŒ¸</title>
    <style>
      @import url('et-book/index.css');
      body { font-family: et-book, serif; font-size: large; }
      .hsplit {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
        padding: 1rem;
      }

      iframe { height: 100%; width: 100%; border: none; }
      input[type="button"] {
        background: none;
        border: none;
        color: blue;
        text-decoration: underline;
        cursor: pointer;
        padding: 0;
        font-family: inherit;
        font-size: inherit;
      }

      article { min-height: 80vh; }
      .hidden { display: none; }
      #display, #display > * { height: 100%; width: 100%; }
      .nowrap { white-space: nowrap; }
    </style>

    <script>
      function display(node) {
        const target = document.querySelector('#display')
        target.innerHTML = ''
        target.appendChild(node)
      }

      function embed(src) {
        const container = document.createElement('div')

        const spinner = document.createElement('div')
        const host = new URL(src).host
        spinner.innerHTML = `Loading <a href="${src}" target="_blank">${host}</a>...`

        const iframe = document.createElement('iframe')
        iframe.classList.add('hidden')
        iframe.src = src
        iframe.addEventListener('load', function() {
          spinner.remove()
          iframe.classList.remove('hidden')
        }, { once: true })

        container.appendChild(spinner)
        container.appendChild(iframe)
        return container
      }

      function countdown(day, startHour, endHour) {
        const target = document.createElement('p')

        const now = new Date()
        let dd = day - now.getDay()
        if (dd < 0) dd += 7

        let dh = startHour - now.getHours()
        if (dd == 0
            && dh > (startHour - endHour)
            && dh < 0
        ) dh = 0
        if (dd == 0 && dh < 0) dd += 7
        if (dh < 0) dh += 24


        if (dd == 0 && dh == 0)
          target.innerText = 'Right Now!'
        else
          target.innerText = 'In ' + (dd > 1 ? (dd - 1) + ' days and ' : '')
              + (dh + ' hours.')

        return target
      }

    </script>
  </head>
  <body>
    <div class="hsplit">
      <article>
        <h1>ðŸŒ¼USYD Community GardenðŸŒ¸</h1>
        <p>
          Come visit us at USYD's Camperdown campus on <strong>Maze Cr., opp. Wilkinson Building</strong> <span class="nowrap">(<input
            type="button"
            value="Google Maps"
            onclick="display(embed('https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d657.1885803158959!2d151.19127927063974!3d-33.889068648873476!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x6b12b11f876ec363%3A0xc442b6451986a587!2sUSYD%20Community%20Garden!5e0!3m2!1sen!2sau!4v1751365448940!5m2!1sen!2sau'))"
          >).
        <p>
        <p>
          If you're interested in getting involved, come and say hi on <strong>Wednesday mornings</strong> <span class="nowrap">(<input
            type="button"
            value="9AM-12PM"
            onclick="display(countdown(3, 9, 12))"
          >)</span> and <strong>Sunday afternoons</strong> <span class="nowrap">(<input
            type="button"
            value="1-4PM"
            onclick="display(countdown(0, 13, 16))"
          >)</span>, when we have group gardening sessions!
        </p>
        <p>
          See what we've been up to on our
          <input type="button" value="Instagram" onclick="display(embed('https://instagram.com/usyd.garden/embed'))">,
          and find other stuff on our
          <a target="_blank" href="https://linktr.ee/usydgardeners">Linktree</a>.
        </p>
      </article>

      <article>
        <div id="display"></div>
      </article>
    </div>
  </body>

</html>
